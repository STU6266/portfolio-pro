<%- include("partials/head") %>
<%- include("partials/header") %>
<%- include("partials/nav") %>

<!--
  filament-add.ejs
  ---------------------------------------------------------------------------
  Renders the "Add filament" companion page.
  - Contains a form for a new filament entry.
  - Shows a live preview that mirrors the main Filament Finder list layout.
  - public/js/filament-add.js syncs form state and preview and sends
    POST /api/filaments to write into filaments.json.
-->

<main class="resume-layout">
  <section class="filament-layout">
    <%- include("partials/contactModal") %>

    <!-- Intro card: context for reviewers and a link back to Filament Finder -->
    <section class="card filament-intro">
      <h1>Add filament</h1>
      <p>
        This form lets users draft a new filament entry and see in real time how it
        would appear in the list below.
      </p>
      <a href="/filament" class="btn-secondary filament-back-button">
        ← Back to Filament Finder
      </a>
    </section>

    <!-- Form card: collects all attributes for a new filament -->
    <section class="card filament-add-card">
      <h2>New filament</h2>
      <form id="filament-add-form" class="filament-add-form">
        <!-- Brand -->
        <div class="filament-field">
          <label for="add-brand">Brand</label>
          <input
            type="text"
            id="add-brand"
            name="brand"
            placeholder="e.g. Prusament"
          />
        </div>

        <!-- Product name -->
        <div class="filament-field">
          <label for="add-product">Product name</label>
          <input
            type="text"
            id="add-product"
            name="product_name"
            placeholder="e.g. PLA Jet Black"
          />
        </div>

        <!-- Material (populated from materials[] by filament-add.js) -->
        <div class="filament-field">
          <label for="add-material">Material</label>
          <select id="add-material" name="material">
            <!-- options are injected from filaments.json -->
          </select>
        </div>

        <!-- Color (restricted to a small set for demo purposes) -->
        <div class="filament-field">
          <label for="add-color">Color</label>
          <select id="add-color" name="color">
            <option value="">no color</option>
            <option value="black">black</option>
            <option value="white">white</option>
          </select>
        </div>

        <!-- Nozzle temperature range -->
        <div class="filament-field">
          <label for="add-nozzle-min">Nozzle min (°C)</label>
          <input
            type="number"
            id="add-nozzle-min"
            name="nozzle_temp_min"
            placeholder="e.g. 200"
          />
        </div>
        <div class="filament-field">
          <label for="add-nozzle-max">Nozzle max (°C)</label>
          <input
            type="number"
            id="add-nozzle-max"
            name="nozzle_temp_max"
            placeholder="e.g. 220"
          />
        </div>

        <!-- Bed temperature range -->
        <div class="filament-field">
          <label for="add-bed-min">Bed min (°C)</label>
          <input
            type="number"
            id="add-bed-min"
            name="bed_temp_min"
            placeholder="e.g. 50"
          />
        </div>
        <div class="filament-field">
          <label for="add-bed-max">Bed max (°C)</label>
          <input
            type="number"
            id="add-bed-max"
            name="bed_temp_max"
            placeholder="e.g. 60"
          />
        </div>

        <!-- Optional special type -->
        <div class="filament-field">
          <label for="add-special-type">Special type (optional)</label>
          <input
            type="text"
            id="add-special-type"
            name="special_type"
            placeholder="e.g. wood, silk, carbon-fiber"
          />
        </div>

        <!-- Notes / short description -->
        <div class="filament-field filament-field-notes">
          <label for="add-notes">Notes</label>
          <textarea
            id="add-notes"
            name="notes"
            rows="3"
            placeholder="Short description or print tips…"
          ></textarea>
        </div>

        <!-- Action area: saving to backend is triggered here -->
        <div class="filament-actions">
          <button type="button" id="filament-save" class="btn-primary">
            Save filament
          </button>
        </div>
      </form>
    </section>

    <!-- Preview card: shows how the filament would appear in the list -->
    <section class="card filament-results-card">
      <h2>Preview in list</h2>
      <div id="filament-add-preview" class="filament-grid"></div>
    </section>
  </section>

  <!-- Attach the script that drives this page -->
  <script src="/js/filament-add.js" defer></script>
</main>

<%- include("partials/footer") %>

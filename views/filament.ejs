<%- include("partials/head") %>
<%- include("partials/header") %>
<%- include("partials/nav") %>

<!--
  filament.ejs
  ---------------------------------------------------------------------------
  Renders the Filament Finder demo.
  - Uses a JSON dataset in public/data/filaments.json.
  - public/js/filament.js handles loading, filtering and rendering results.
  - This view focuses on the page structure and semantic markup.
-->

<main class="resume-layout">
  <section class="filament-layout">
    <!-- Optional contact modal (nav "Contact Me" integrates with this) -->
    <%- include("partials/contactModal") %>

    <!-- Intro card: short explanation for visitors / reviewers -->
    <section class="card filament-intro">
      <h1>Filament Finder</h1>
      <p>
        This small tool shows basic work with data structures, filtering, and a simple UI.
        The dataset is based on real filament brands and typical printing temperature ranges.
      </p>
      <p class="filament-note">
        In a larger application this could read from a SQL database. Here it runs fully
        static from a JSON file for easier hosting and deployment.
      </p>

      <!-- Back button to the projects page -->
      <a href="/projects" class="btn-secondary filament-back-button">
        ← Back to projects
      </a>
    </section>

    <!-- Filter card with controls + material info box -->
    <section class="card filament-filter-card">
      <h2>Filter</h2>

      <!--
        Wrapper for filter form (left) and material info (right).
        Layout is controlled via CSS (flex / grid) to adapt between
        desktop and mobile screens.
      -->
      <div class="filament-filter-layout">
        <!-- Mobile-only toggle button to show/hide filters -->
        <button
          type="button"
          id="filament-filter-toggle"
          class="filament-filter-toggle">
          Show filters
        </button>

        <!--
          Filter form.
          All values are read by filament.js, which reacts on change/input
          and updates the result list accordingly.
        -->
        <form id="filament-filter-form" class="filament-filter-form">
          <!-- Material dropdown (populated from materials[] in filaments.json) -->
          <div class="filament-field">
            <label for="filter-material">Material</label>
            <select id="filter-material" name="material">
              <!-- options are injected by filament.js -->
            </select>
          </div>

          <!-- Brand dropdown (populated from filaments[] in filaments.json) -->
          <div class="filament-field">
            <label for="filter-brand">Brand</label>
            <select id="filter-brand" name="brand">
              <!-- options are injected by filament.js -->
            </select>
          </div>

          <!-- Color dropdown (simple: any / black / white) -->
          <div class="filament-field">
            <label for="filter-color">Color</label>
            <select id="filter-color" name="color">
              <option value="">Any color</option>
              <option value="black">Black</option>
              <option value="white">White</option>
            </select>
          </div>

          <!-- Nozzle temperature: user enters a single value (e.g. 210°C) -->
          <div class="filament-field">
            <label for="filter-nozzle-temp">Nozzle temp (°C)</label>
            <div class="filament-range">
              <input
                type="number"
                id="filter-nozzle-temp"
                name="nozzle"
                placeholder="e.g. 210"
              />
            </div>
          </div>

          <!-- Bed temperature: same idea as nozzle, but optional -->
          <div class="filament-field">
            <label for="filter-bed-temp">Bed temp (°C)</label>
            <div class="filament-range">
              <input
                type="number"
                id="filter-bed-temp"
                name="bed"
                placeholder="optional"
              />
            </div>
          </div>
        </form>

        <!--
          Right-hand side: material information panel.
          Updated by filament.js when the user selects a material.
        -->
        <aside id="filament-material-info" class="filament-material-info">
          <h3>Material info</h3>
          <p class="filament-material-empty">
            Select a material on the left to see typical nozzle and bed temperatures.
          </p>
        </aside>
      </div>
    </section>

    <!-- Simple link row to the "Add filament" demo page -->
    <section class="filament-add-link-row">
      <a href="/filament/add" class="btn-secondary filament-add-link">
        + Add new filament
      </a>
    </section>

    <!--
      Results card.
      - Initial state shows a "Loading..." message.
      - filament.js replaces this with result cards or a "no matches" message.
    -->
    <section class="card filament-results-card">
      <h2>Matching filaments</h2>
      <p id="filament-results-empty" class="filament-empty">
        Loading filament data…
      </p>
      <div id="filament-results-list" class="filament-grid"></div>
    </section>
  </section>

  <!-- Attach the main Filament Finder script -->
  <script src="/js/filament.js" defer></script>
</main>

<%- include("partials/footer") %>
